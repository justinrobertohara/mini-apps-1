<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>CSV Report</title>
  </head>
  <body>
    <form id="form1">
      Sample Data:<br />
      <!-- <input type="text" name="data" value="" /><br /> -->
      <textarea rows="4" cols="50" name="data">
{
        "firstName": "Joshie",
        "lastName": "Wyattson",
        "county": "San Mateo",
        "city": "San Mateo",
        "role": "Broker",
        "sales": 1000000,
        "children": [
        {
          "firstName": "Beth Jr.",
          "lastName": "Johnson",
          "county": "San Mateo",
          "city": "Pacifica",
          "role": "Manager",
          "sales": 2900000,
          "children": [
            {
              "firstName": "Smitty",
              "lastName": "Won",
              "county": "San Mateo",
              "city": "Redwood City",
              "role": "Sales Person",
              "sales": 4800000,
              "children": []
            },
            {
              "firstName": "Allen",
              "lastName": "Price",
              "county": "San Mateo",
              "city": "Burlingame",
              "role": "Sales Person",
              "sales": 2500000,
              "children": []
            }
          ]
        },
        {
          "firstName": "Beth",
          "lastName": "Johnson",
          "county": "San Francisco",
          "city": "San Francisco",
          "role": "Broker/Sales Person",
          "sales": 7500000,
          "children": []
        }
      ]
      }
      </textarea>
      <input type="submit" value="Submit" />
    </form>
  </body>
  <script type="text/javascript" src="./app.js"></script>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script>
    $('#form1').submit(function(e) {
      e.preventDefault(); // avoid to execute the actual submit of the form.

      var form = $(this);
      var url = form.attr('action');

      $.ajax({
        type: 'POST',
        url: '/upload_json',
        data: form.serialize(), // serializes the form's elements.
        success: function(data) {
          // alert(data);
          console.log(data);
          $('body').append(data);
          // show response from the php script.
        }
      });
    });
  </script>
</html>
